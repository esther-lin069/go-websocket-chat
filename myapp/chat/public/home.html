<!DOCTYPE html>
<html lang="en">

<head>
    <title>Go Chat!</title>
    <!-- 字體與icon -->
    <link rel="shortcut icon" href="#" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <link href='https://cdnjs.cloudflare.com/ajax/libs/MaterialDesign-Webfont/3.6.95/css/materialdesignicons.css'>

    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"
        integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
    <!-- vue.js -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <!-- 功能性套件 -->
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.js"></script>
    <script src="../asset/js/reconnecting-websocket.min.js"></script>
    
    <!-- 自訂css -->
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="../asset/css/home.css">

    <!-- 自訂js -->
    <script src="../asset/js/home.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- <script src="../asset/js/ws.js"></script> -->

</head>
<body>
    <!-- nav bar -->
    <div class="nav">
        <span style="color:#FFF;margin-right:8px;">
            <i class="fa fa-fish"></i>
        </span>
        <span>Go chat！</span>
    </div>
    <!-- left: room information -->
    <div id="room">
        <div id="room-title" >
            <div class="room-title div-ell">
                <!-- 聊天室名稱 -->
                <h1 class="title-text" id="room-id">{{ title }}</h1>
                <!-- 刪除聊天室按鈕 -->
                <button class="exit-btn" v-show="seen_del" @click="DeleteRoom(title)" id="del-room-btn">刪除房間</button>
                <!-- 離開聊天室按鈕 -->
                <button class="exit-btn" v-show="seen_leave" @click="LeaveRoom" id="leave-room-btn">退出房間</button>
            </div>
            <h5 class="title-text">聊天室列表
                <button @click="NewRoom(title)" id="newRoom">
                    <svg class="svg-icon" viewBox="0 0 20 20">
                        <path
                            d="M14.613,10c0,0.23-0.188,0.419-0.419,0.419H10.42v3.774c0,0.23-0.189,0.42-0.42,0.42s-0.419-0.189-0.419-0.42v-3.774H5.806c-0.23,0-0.419-0.189-0.419-0.419s0.189-0.419,0.419-0.419h3.775V5.806c0-0.23,0.189-0.419,0.419-0.419s0.42,0.189,0.42,0.419v3.775h3.774C14.425,9.581,14.613,9.77,14.613,10 M17.969,10c0,4.401-3.567,7.969-7.969,7.969c-4.402,0-7.969-3.567-7.969-7.969c0-4.402,3.567-7.969,7.969-7.969C14.401,2.031,17.969,5.598,17.969,10 M17.13,10c0-3.932-3.198-7.13-7.13-7.13S2.87,6.068,2.87,10c0,3.933,3.198,7.13,7.13,7.13S17.13,13.933,17.13,10">
                        </path>
                    </svg>
                </button>
            </h5>
        </div>

        <div id="rooms">
            <!-- 聊天室列表 -->
            <div id="roomList">
            <button id="main-room" @click="goToRoom('main')" class="mh20 room-box-text room-btn" value="main">大廳</button>
                <dl>
                    <!-- 大廳除外的聊天室列表 -->
                    <dt
                        v-for="(room, index) in rooms"
                        :room="room"
                        :id="room.room_id"
                        :key="index"
                    >
                        <button @click="goToRoom(room.room_id)" class="mh20 room-box-text room-btn">{{ room.room_id }} ({{ room.len }})</button>
                    </dt>
                </dl>
            </div>            
        </div>
    </div>
    <!-- center: chat field -->
    <div id="chat">
        <div id="log"></div>
        <div id="form">
            <form class="us-form form-inline">
                <select id="msg-type">
                    <option value="default">一般</option>
                    <option value="broadcast">廣播</option>
                </select>
                <input class="w3-input w3-border w3-round" type="text" id="msg" autofocus />
                <button type="submit">Send</button>
            </form>
        </div>
    </div>
    <!-- right: member list -->
    <div id="member">
        <h5 id="switch-all-online" class="title-text">
            <button class="list-btn" @click="sOnline" :style="{ color: onlineColor }" id="btn-now-users">在線列表</button><span> |</span>
            <button class="list-btn" @click="sAll" :style="{ color: allColor }" id="btn-all-users" style="color:#827a7a;">所有使用者</button>
        </h5>
        <dl>
            <dt>
                <div id="myUserBlock" class="card">
                    <div class="box">
                        <span style="color:rgb(230, 215, 102);margin-right:8px;">
                            <i class="fa fa-user"></i>
                        </span>
                        <span id="my-id" class="box-text">{{ username }}</span>
                    </div>
                </div>
            </dt>
        </dl>
        <!-- 線上使用者區塊 -->
        <div v-show="seen" id="online-users">
            <dl id="online-member-list">
                <!-- 該聊天室內的使用者清單 -->
            </dl>
        </div>
        <!-- 所有使用者區塊 -->
        <div v-show="seen" id="all-users" class="all-users">
            <label style="margin-left: 10%;">搜尋</label>
            <input v-model="search" type="text" class="w3-input w3-border w3-round" id="user-search">
            <dl>
                <dt 
                v-for="(member, index) in filterd"
                :id="member.username"
                :key="index">
                    <div class="card">
                        <div class="box">
                        <span style="color:#00798F;margin-right:8px;">
                            <i class="fa fa-user"></i>
                        </span>
                        <a @click="privateChat(member.username)" class="pchat-btn" role="button" href="#" data-id="${element}">
                            <i class="fa fa-comment-dots"></i></a>
                        <span class="box-text">{{ member.username }}</span> 
                        </div>
                    </div>
                </dt>
            </dl>
        </div>


    </div>




</body>
<script src="../asset/js/home_vue.js"></script>
</html>